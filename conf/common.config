/*
 * Reporting tool configuration (trait analysis reports)
 */
 
params {
    // Main parameters
    help               = help               ?: false // Show help and exit
    enable_tower       = enable_tower       ?: false // Enable Seqera Platform (Tower) integration
    outdir             = outdir             ?: "$baseDir/Out" // Output directory
    work               = work               ?: "$baseDir/Out/work" // Working directory
    
    // Data input parameters
    my_traits          = my_traits          ?: "$baseDir/Data/1.Cancer_data/Neoplasia_species360/cancer_traits_processed-LQ.csv" // Path to traits CSV file
    tree               = tree               ?: "$baseDir/Data/5.Phylogeny/science.abn7829_data_s4.nex.tree" // Path to species tree file (newick)
    traitname          = traitname          ?: "malignant_prevalence" // Name of the trait column to analyze
    tax_id             = tax_id             ?: "$baseDir/Data/5.Phylogeny/taxid_species_family.tsv" // Path to taxonomic ID mapping file (taxid to species)

    // Reporting parameters
    reporting          = reporting          ?: false // Whether to generate HTML reports using Rmarkdown
    sp_colname         = sp_colname         ?: "species" // Name of the species column in the traits CSV file
    clade_name         = clade_name         ?: "primates" // Name of the clade to focus on in the report
    taxon_of_interest  = taxon_of_interest  ?: "family" // Taxonomic level of interest (e.g., "family", "order")
    seed               = seed               ?: "1998" // Random seed for reproducibility
 
    // Using population data parameters?
    // Specify that these traits would work for frequency data (e.g., prevalence, incidence)
    // rethink the naming convention here...
    // maybe could also be applied for median values with sample sizes?
    // maybe p_trait could be n_trait, and n_trait could be c_trait?
    n_trait            = n_trait            ?: "adult_necropsy_count" // Trait with number of individuals sampled (population size)
    c_trait            = c_trait            ?: "malignant_count" // Trait with number of observed cases (e.g., number of neoplasia cases)
   
    // Interested in other phenotypes?
    secondary_trait    = secondary_trait    ?: "neoplasia_prevalence" // Name of a secondary trait column to include (optional)
    branch_trait       = branch_trait       ?: "LQ" // Name of the trait column to use for branch coloring (optional)

    // ____________________________________

    // Contrast selection parameters
    contrast_selection = contrast_selection ?: false // Whether to run the contrast selection workflow (note that for CI calculation, population data is needed) 

    // ____________________________________

    // Data pruning parameters
    // This is to be run with --reporting. Recommended use case: run once WITH --reporting only, and another with both ---reporting and --prune_data
    prune_data         = prune_data         ?: false // Whether to prune the dataset based on a user-provided list of species
    prune_list         = prune_list         ?: "$baseDir/Data/1.Cancer_data/Neoplasia_species360/ZAK-CLEANUP/malignant_exclude.txt" // Path to the species pruning list
    prune_list_secondary = prune_list_secondary ?: "$baseDir/Data/1.Cancer_data/Neoplasia_species360/ZAK-CLEANUP/neoplasia_exclude.txt" // Optional secondary prune list (e.g., for a secondary trait)
}

/*
 * Defining trait aware outdir
 */

def trace_timestamp = new Date().format('yyyyMMdd_HHmmss')

params.outdir = "${params.outdir}/${params.traitname}/${trace_timestamp}"
